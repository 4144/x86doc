<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<link rel="stylesheet" type="text/css" href="style.css"/>
	<title>XABORT — Transactional Abort</title>
</head>
<body>
<h1 id="xabort-transactional-abort">XABORT — Transactional Abort</h1>
<table>
<tr>
	<td>Opcode/Instruction</td>
	<td>Op/En</td>
	<td>64/32bit Mode Support</td>
	<td>CPUID Feature Flag</td>
	<td>Description</td>
</tr>
<tr>
	<td>C6 F8 ib XABORT imm8</td>
	<td>A</td>
	<td>V/V</td>
	<td>RTM</td>
	<td>Causes an RTM abort if in RTM execution</td>
</tr>
</table>
<h2 id="instruction-operand-encoding">Instruction Operand Encoding</h2>
<table>
<tr>
	<td>Op/En</td>
	<td>Operand 1</td>
	<td>Operand2</td>
	<td>Operand3</td>
	<td>Operand4</td>
</tr>
<tr>
	<td>A</td>
	<td>imm8</td>
	<td>NA</td>
	<td>NA</td>
	<td>NA</td>
</tr>
</table>
<h2 id="description">Description</h2>
<p>XABORT forces an RTM abort. Following an RTM abort, the logical processor resumes execution at the fallback address computed through the outermost XBEGIN instruction. The EAX register is updated to reflect an XABORT instruction caused the abort, and the imm8 argument will be provided in bits 31:24 of EAX.</p>
<h2 id="operation">Operation</h2>
<pre>XABORT
IF RTM_ACTIVE = 0
  THEN
     Treat as NOP;
  ELSE
     GOTO RTM_ABORT_PROCESSING;
FI;
(* For any RTM abort condition encountered during RTM execution *)
RTM_ABORT_PROCESSING:
  Restore architectural register state;
  Discard memory updates performed in transaction;
  Update EAX with status and XABORT argument;
  RTM_NEST_COUNT ← 0;
  RTM_ACTIVE ← 0;
  IF 64-bit Mode
     THEN
       RIP ← fallbackRIP;
     ELSE
       EIP ← fallbackEIP;
  FI;
END
</pre>
<h2 id="flags-affected">Flags Affected</h2>
<p>None</p>
<h2 id="intel-c-c-compiler-intrinsic-equivalent">Intel C/C++ Compiler Intrinsic Equivalent</h2>
<table>
<tr>
	<td>XABORT:</td>
	<td>void _xabort( unsigned int);</td>
</tr>
</table>
<h2 id="simd-floating-point-exceptions">SIMD Floating-Point Exceptions</h2>
<p>None</p>
<h2 id="other-exceptions">Other Exceptions</h2>
<table>
<tr>
	<td>#UD</td>
	<td>CPUID.(EAX=7, ECX=0):RTM[bit 11] = 0. If LOCK prefix is used.</td>
</tr>
</table>
</body>
</html>
